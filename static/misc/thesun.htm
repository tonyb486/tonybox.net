<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=0.6" />

<style type="text/css">
body {
   margin:0px;
   height:100%;
   background: linear-gradient(-45deg, #68b3d9, #68d9b3, #7168d9, #edbf7e);
   background-size: 500%;
   animation: gradient 10s ease infinite;
   user-select: none;
   -webkit-user-select: none;
}


@keyframes gradient {
   0% { background-position: 0% 50%; }
   50% { background-position: 100% 100%; }
   100% { background-position: 0% 50%; }
}

span#sun {
   background: url("cursor/sun.png");

   width:128px;
   height:128px;

   position:absolute;
   top:100; left:100;

   border-radius: 64px;
   border: none;
   animation: lrbounce 3s ease infinite, udbounce 2s ease infinite;
}

@keyframes lrbounce {
   0% { margin-left: 0; }
   50% { margin-left: 100px; }
   100% { margin-left: 0; }
}

@keyframes udbounce {
   0% { margin-top: 0; }
   50% { margin-top: 100px; }
   100% { margin-top: 0; }
}

h1 {
   margin: 0;
   padding-top:50px;

   font: 900 1.2em sans-serif;
   text-align: center;
   font-size: 100px;

   background: linear-gradient(-45deg, #68b3d9, #68d9b3, #7168d9, #edbf7e);
   background-clip: text;
   -webkit-background-clip: text;
   color: rgba(0,0,0,.2);

   user-select: none;
   -webkit-user-select: none;
}

span#donnyt {
    background: url("cursor/dtsmall.png");
    width: 128px;
    height: 128px;
    position: absolute;
    bottom: 0;
    left: 100;
    margin: 0;
}

span#nuke {
    background: url("cursor/nuke.png");
    width: 64px;
    height: 121px;

    position: absolute;
    left: 100px;
    bottom: 110%;

    animation: nuke 1s ease ;
    display: none;
}

@keyframes nuke {
   0% { bottom: 128px; }
   100% { bottom: 110%; }
}

</style>


<script type="text/javascript">

   var nukeLaunched = false;

   var nuke = null;
   var sun = null;
   var dt = null;

   function randomizeSun() {
      sun.style.background = "url(cursor/sun.png)";
      sun.style.left = Math.random()*(window.innerWidth-256)+"px"
      sun.style.top = Math.random()*(window.innerHeight-256)+"px"
   }

   function hit() {
      sun.style.background = "url(cursor/boom.png)";
      setTimeout(randomizeSun, 300);
   }

   function movedt(e) {
      dt.style.left = e.clientX-64;
   }

   function dtfire(e) {

      // Play a sound on the first click
      boom.currentTime = 0;
      boom.play();

      if(nuke.style.display != "block") {
         nuke.style.display = "block";
         nuke.style.left = e.clientX-32;
      }
   }

   function dtIterate2() {
      var box = nuke.getBoundingClientRect();
      if(box.bottom<0) {
         nuke.style.display="none";
      } else {
         sbox = sun.getBoundingClientRect();

         if (!(box.right < sbox.left || 
               box.left > sbox.right || 
               box.bottom < sbox.top || 
               box.top > sbox.bottom)) {
                  hit();
                  nuke.style.display="none";
         }
         
      }
   }

   window.onload = function() {
      boom = new Audio("cursor/boom.mp3");

      dt = document.getElementById("donnyt");
      sun = document.getElementById("sun");
      nuke = document.getElementById("nuke");

      window.addEventListener("mousemove", movedt)
      window.addEventListener("click", dtfire)

      window.addEventListener("touchstart", function(e) {
         movedt(e.touches[0]);
         dtfire(e.touches[0]);
      });

      //setInterval(dtIterate, 16)

      setInterval(dtIterate2, 100)

      randomizeSun();
   }

</script>

<body>
   <h1>POKE THE SUN</h1>
   <span id="sun" onclick="randomizesun"></span>
   <span id="donnyt"></span>


   <span id="nuke"></span>
</body>
